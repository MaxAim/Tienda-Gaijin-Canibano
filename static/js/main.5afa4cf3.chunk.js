(this["webpackJsonptienda-gaijin-canibano"]=this["webpackJsonptienda-gaijin-canibano"]||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var i=n(1),c=n.n(i),a=n(14),r=n.n(a),o=(n(38),n(39),n(40),Object(i.createContext)()),s=n(7),d=n(0),l=function(){var e=Object(i.useContext)(o).cartNum;return Object(d.jsx)("div",{id:"Cart",children:Object(d.jsxs)(s.b,{style:{height:"100%"},to:"/cart",children:["\ud83d\uded2",e||""]})})},j=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("header",{className:"NavBar",children:[Object(d.jsx)(s.c,{to:"/",style:{padding:"0 2% 0 2%"},children:Object(d.jsxs)("h1",{children:["Tienda ",Object(d.jsx)("b",{style:{fontSize:"3vw",textShadow:"none"},children:"\u2b24"})," Gaijin"]})}),Object(d.jsx)(s.c,{to:"/",className:"NavLink",children:"Todos"}),Object(d.jsx)(s.c,{to:"/category/comida",activeClassName:"off",className:"NavLink",children:"Comida"}),Object(d.jsx)(s.c,{to:"/category/ropa",activeClassName:"off",className:"NavLink",children:"Ropa"}),Object(d.jsx)(s.c,{to:"/category/figuras",activeClassName:"off",className:"NavLink",children:"Figuras"}),Object(d.jsx)(s.c,{to:"/category/otros",activeClassName:"off",className:"NavLink",children:"Otros"}),Object(d.jsx)(l,{})]})})},b=n(5),u=(n(46),n(4)),h=function(e){var t=e.color,n=e.backgroundColor,i=e.width,c=e.text,a=e.height,r=e.onClick,o=e.border,s=e.display,l=e.margin;return Object(d.jsx)("button",{style:{color:t,backgroundColor:n,width:i,height:a,border:o,borderRadius:"10px",display:s,fontSize:"1.1vw",margin:l},onClick:r,children:c})};var x=function(e){var t=e.stock,n=e.num,i=e.setNum;function c(){i(n<t?n+1:n)}return Object(d.jsxs)("div",{style:{width:"auto"},children:[Object(d.jsx)(h,{text:"Agregar",width:"6vw",height:"2.8vw",border:"none",backgroundColor:"rgb(18, 0, 177)",color:"white",onClick:c,display:0===n&&0!==t?"inline":"none"}),Object(d.jsxs)("div",{style:{display:0===n?"none":"inline-flex",justifyContent:"center"},children:[Object(d.jsx)(h,{text:"-",width:"2.8vw",height:"2.8vw",backgroundColor:"gray",onClick:function(){i(n>0?n-1:n)}}),Object(d.jsx)("input",{style:{display:0===n?"none":"block",width:n>9?"2.2vw":"2vw",fontSize:"1vw"},type:"text",value:n,onChange:function(){i(n)}}),Object(d.jsx)(h,{text:"+",width:"2.8vw",height:"2.8vw",backgroundColor:"gray",onClick:c})]}),Object(d.jsx)("p",{style:{fontSize:"1.3vw",display:0===t?"inline-flex":"none"},children:"No hay stock"})]})};var O=function(e){var t=e.item,n=Object(u.g)().itemsId;return Object(d.jsxs)("div",{className:"subTable",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{style:{width:"100%"},children:Object(d.jsx)(s.b,{id:"pictureContainer",to:{pathname:"/item/".concat(t.id)},children:Object(d.jsx)("img",{alt:t.title,src:t.image})})}),Object(d.jsx)("div",{style:{width:"100%",paddingTop:"2%"},children:Object(d.jsx)("b",{children:t.title})})]}),Object(d.jsxs)("div",{style:{display:"flex",paddingTop:"10%"},children:[0===t.stock?Object(d.jsx)("p",{style:{fontSize:"2.3vw",width:"100%"},children:"No hay stock"}):Object(d.jsxs)("div",{style:{width:"50%",padding:"7%",fontSize:"2.3vw"},children:["\xa5",t.price]}),void 0===n?Object(d.jsx)(s.b,{to:{pathname:"/item/".concat(t.id)},children:Object(d.jsx)(h,{text:"Ver m\xe1s",width:"6vw",height:"2.8vw",border:"none",backgroundColor:"rgb(18, 0, 177)",color:"white"})}):Object(d.jsx)("div",{style:{width:"100%",padding:"5%"},children:Object(d.jsx)(x,{stock:t.stock})})]})]})},f=(n(47),function(e){var t=e.items,n=e.loaded;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"tableDark",children:[Object(d.jsx)("div",{style:{display:1!==n?"flex":"none"},children:"Cargando..."}),t.map((function(e){return Object(d.jsx)(O,{item:e},e.id)}))]})})}),p=n(17),m=(n(30),p.initializeApp({apiKey:"AIzaSyBICxIz97MfF7fPmpDxp_9IyQPhbF4s1Oo",authDomain:"tienda-gaijin.firebaseapp.com",databaseURL:"https://tienda-gaijin-default-rtdb.firebaseio.com",projectId:"tienda-gaijin",storageBucket:"tienda-gaijin.appspot.com",messagingSenderId:"490933764082",appId:"1:490933764082:web:04a972fb37c12bad80756b",measurementId:"G-YD4TJBFT7G"}));function g(){return p.firestore(m)}var v=function(){var e=Object(i.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(0),r=Object(b.a)(a,2),o=r[0],s=r[1],l=Object(u.g)().categoryId,j=Object(u.f)();return Object(i.useEffect)((function(){var e=g().collection("products");(void 0!==l?e.where("category","==",l):e).get().then((function(e){0===e.size&&(console.log("No responce"),j.push("/")),c(e.docs.map((function(e){return e.data()}))),s(1)}))}),[l,j]),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(f,{loaded:o,items:n})})},y=(n(55),function(e){var t=e.item,n=e.loaded,c=Object(i.useState)(0),a=Object(b.a)(c,2),r=a[0],l=a[1],j=Object(i.useContext)(o).addProducts;return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"tableDetail",style:{display:1!==n?"flex":"none"},children:"Cargando..."}),Object(d.jsxs)("div",{className:"subTable tableDetail",style:{display:1!==n?"none":"flex"},children:[Object(d.jsxs)("div",{style:{display:"flex"},children:[Object(d.jsx)("div",{style:{width:"15%"},children:Object(d.jsx)("img",{alt:t.title,src:t.image})}),Object(d.jsxs)("div",{style:{width:"85%",paddingLeft:"2%",display:"grid",justifyItems:"center"},children:[Object(d.jsx)("b",{children:t.title}),Object(d.jsx)("p",{children:t.description})]})]}),Object(d.jsxs)("div",{style:{display:"grid",justifyItems:"center",width:"25%",padding:"2%"},children:[Object(d.jsxs)("div",{style:{width:"100%",padding:"5%"},children:[Object(d.jsx)(x,{stock:t.stock,num:r,setNum:l}),Object(d.jsxs)("div",{style:{width:"100%",paddingTop:"20%",fontSize:"2.3vw",display:0===t.stock?"none":"inline-flex"},children:["\xa5",t.price]})]}),Object(d.jsx)(s.b,{to:"/cart",children:Object(d.jsx)(h,{text:"Confirmar",width:"8.2vw",height:"3vw",border:"none",backgroundColor:"rgb(18, 0, 177)",color:"white",onClick:function(){j({id:t.id,amount:r,name:t.title,price:t.price,key:t.number,stock:t.stock,image:t.image,description:t.description})},display:0===r?"none":"inline"})})]})]})]})});var w=function(){var e=Object(i.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(u.g)().itemsId,r=Object(u.f)(),o=Object(i.useState)(0),s=Object(b.a)(o,2),l=s[0],j=s[1];return Object(i.useEffect)((function(){g().collection("products").where("id","==",a).get().then((function(e){0===e.size&&(console.log("No responce"),r.push("/")),c(e.docs.map((function(e){return e.data()}))[0]),j(1)}))}),[a,r]),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(y,{loaded:l,item:n})})},C=n(33),k=n(2),I=function(e){var t=e.children,n=Object(i.useState)([]),c=Object(b.a)(n,2),a=c[0],r=c[1],s=Object(i.useState)(!1),l=Object(b.a)(s,2),j=l[0],u=l[1],h=Object(i.useState)("Error no especificado"),x=Object(b.a)(h,2),O=x[0],f=x[1],p=Object(i.useState)(0),m=Object(b.a)(p,2),g=m[0],v=m[1],y=function(){return u(!0)};Object(i.useEffect)((function(){v(a.reduce((function(e,t){return e+t.amount}),0))}),[a]);return Object(d.jsx)(o.Provider,{value:{addProducts:function(e){if(a.find((function(t){return t.id===e.id}))){var t=a.map((function(t){if(t.id===e.id){if(!(t.amount+e.amount>=e.stock))return Object(k.a)(Object(k.a)({},t),{},{amount:t.amount+e.amount});f("Stock insuficiente"),y()}return t}));r(t)}else r((function(t){return[].concat(Object(C.a)(t),[e])}))},deleteItem:function(e){a.splice(a.indexOf(e),1),v(a.reduce((function(e,t){return e+t.amount}),0))},totalPrice:function(){return a.reduce((function(e,t){return e+t.price*t.amount}),0)},setCart:r,handleShow:y,handleClose:function(){return u(!1)},setErrorText:f,cart:a,cartNum:g,show:j,errorText:O},children:t})},N=function(e){var t=e.item,n=e.loaded,c=Object(i.useContext)(o).deleteItem;return Object(d.jsxs)("div",{id:t.key,children:[Object(d.jsx)("div",{className:"tableDetail",style:{display:1!==n?"flex":"none"},children:"Cargando..."}),Object(d.jsxs)("div",{className:"subTable tableDetail",style:{display:1!==n?"none":"flex"},children:[Object(d.jsxs)("div",{style:{display:"flex"},children:[Object(d.jsx)("div",{style:{width:"15%"},children:Object(d.jsx)("img",{alt:t.title,src:t.image})}),Object(d.jsxs)("div",{style:{width:"85%",paddingLeft:"2%",display:"grid",justifyItems:"center"},children:[Object(d.jsx)("b",{children:t.name}),Object(d.jsx)("p",{children:t.description})]})]}),Object(d.jsxs)("div",{style:{display:"grid",justifyItems:"center",width:"25%",padding:"2%",fontSize:"2rem"},children:[Object(d.jsxs)("div",{style:{width:"100%",padding:"5%"},children:["\xa5",t.price*t.amount]}),Object(d.jsxs)("div",{style:{width:"100%",padding:"5%"},children:[t.amount," x \xa5",t.price]}),Object(d.jsx)(s.b,{to:"/cart",children:Object(d.jsx)(h,{text:"Eliminar",width:"8.2vw",height:"3vw",border:"none",backgroundColor:"rgb(18, 0, 177)",color:"white",onClick:function(){c(t)}})})]})]})]})},S=n(15);n(56);var T=function(e){var t=e.setUserInfo,n=e.userInfo,c=e.completeOrder,a=Object(i.useContext)(o),r=a.setErrorText,s=a.handleShow,l=[n.name,n.address,n.email,n.phone],j=n.email.lastIndexOf("@")<n.email.lastIndexOf(".")&&n.email.lastIndexOf("@")>0&&-1===n.email.indexOf("@@")&&n.email.lastIndexOf(".")>2&&n.email.length-n.email.lastIndexOf(".")>2,b=function(e){var i=e.target,c=i.name,a=i.value;console.log(n),t((function(e){return Object(k.a)(Object(k.a)({},e),{},Object(S.a)({},c,a))}))};return Object(d.jsxs)("div",{className:"tableDark",style:{flexFlow:"column"},children:[Object(d.jsxs)("fieldset",{children:[Object(d.jsx)("legend",{children:"Informacion personal"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"Nombre:"}),Object(d.jsx)("input",{type:"text",required:!0,onChange:b,value:n.name,id:"nombre",name:"name",placeholder:"Nombre"}),Object(d.jsx)("p",{children:"Direccion:"}),Object(d.jsx)("input",{type:"text",required:!0,onChange:b,value:n.adress,id:"direccion",name:"adress",placeholder:"Direccion"}),Object(d.jsx)("p",{children:"Mail:"}),Object(d.jsx)("input",{required:!0,onChange:b,value:n.email,id:"email",placeholder:"Email",type:"email",name:"email"}),Object(d.jsx)("p",{children:"Telefono:"}),Object(d.jsx)("input",{type:"text",required:!0,onChange:b,onKeyDown:function(e){!isFinite(e.key)&&8!==e.keyCode&&e.preventDefault()},value:n.phone,id:"telefono",placeholder:"phone",name:"phone"}),Object(d.jsx)("p",{children:"Informacion extra:"}),Object(d.jsx)("textarea",{onChange:b,value:n.extra,name:"extra",id:"info",rows:"20",placeholder:"Informacion extra"})]}),Object(d.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/tienda-gaijin.appspot.com/o/contacto.png?alt=media&token=6dfbf502-6abf-48da-b6c2-c5b077698005",alt:"Kawaii"})]}),Object(d.jsxs)("fieldset",{style:{display:"flex",justifyContent:"end"},children:[Object(d.jsx)("legend",{children:"Confirmar"}),Object(d.jsx)(h,{border:"none",backgroundColor:"rgb(18, 0, 177)",color:"white",text:"Finalizar Compra",onClick:function(){void 0===l.find((function(e){return""===e}))&&!0===j?c():(r(!0===j?"Datos faltantes":"Correo electronico invalido"),s())},height:"50px",width:"100%"})]})]})},D=n(61);n(57);var F=function(e){var t=e.cleanCart,n=Object(i.useContext)(o),c=n.handleClose,a=n.show,r=n.errorText;return Object(d.jsxs)(D.a,{show:a,onHide:c,onExited:t,children:[Object(d.jsx)(D.a.Body,{children:r}),Object(d.jsx)(D.a.Footer,{children:Object(d.jsx)(h,{text:"X",width:"1.5vw",height:"1.5vw",border:"none",backgroundColor:"rgb(18, 0, 177)",color:"white",onClick:c})})]})};var z=function(){var e=g(),t=Object(i.useContext)(o),n=t.cart,c=t.totalPrice,a=t.setCart,r=t.handleShow,s=t.setErrorText,l=Object(i.useState)(0),j=Object(b.a)(l,2),x=j[0],O=j[1],f=Object(u.f)(),m=Object(i.useState)(null),v=Object(b.a)(m,2),y=v[0],w=v[1],C=e.collection("orders"),k=Object(i.useState)({name:"",adress:"",email:"",phone:"",extra:""}),I=Object(b.a)(k,2),S=I[0],D=I[1],z={buyer:S,items:n,date:p.firestore.Timestamp.fromDate(new Date),total:c()};return Object(i.useEffect)((function(){O(1)}),[n]),Object(d.jsx)("div",{children:Object.keys(n).length?Object(d.jsxs)("div",{children:[Object(d.jsx)(F,{cleanCart:function(){null!==y&&(a([]),f.push("/"))}}),n.map((function(e){return Object(d.jsx)(N,{item:e,loaded:x},e.key)})),Object(d.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(d.jsxs)("div",{className:"tableDark",id:"totalCost",children:[Object(d.jsx)("div",{style:{marginRight:"5%"},children:"Total:"}),Object(d.jsxs)("div",{children:["\xa5",c()]})]})}),Object(d.jsx)(T,{completeOrder:function(){C.add(z).then((function(e){var t=e.id;w(t),s("Gracias "+S.name+" por tu compra. El id de tu orden es "+t),r()})).catch((function(e){console.log(e)}))},setUserInfo:D,userInfo:S})]}):Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"tableDark",children:Object(d.jsxs)("div",{style:{width:"100%",minHeight:"500px",display:"grid"},children:[Object(d.jsxs)("div",{style:{position:"absolute",justifyContent:"center",zIndex:"2",width:"100%",alignItems:"center",height:"500px",display:"flex"},children:[Object(d.jsx)(h,{border:"none",backgroundColor:"rgb(18, 0, 177)",color:"white",text:"Seguir comprando",onClick:function(){return f.push("/")},height:"50px",width:"150px"}),Object(d.jsx)(h,{border:"none",backgroundColor:"rgb(177, 0, 18)",color:"white",text:"Seguir comprando pero en rojo",onClick:function(){return f.push("/")},height:"auto",width:"150px",margin:"0px 50px 50px 170px"})]}),Object(d.jsx)("img",{style:{width:"500px",height:"100px",justifySelf:"center",paddingRight:"250px"},src:"https://firebasestorage.googleapis.com/v0/b/tienda-gaijin.appspot.com/o/vacio.png?alt=media&token=c0fc45e4-6924-48f8-ab8f-58f843464b5c",alt:"Carrito vacio"}),Object(d.jsx)("img",{style:{maxHeight:"400px",maxWidth:"400px",justifySelf:"center"},src:"https://firebasestorage.googleapis.com/v0/b/tienda-gaijin.appspot.com/o/nada.png?alt=media&token=2304c6fa-6c8c-4764-be74-1a9e983d9671",alt:"Carrito vacio"})]})})})})};var E=function(){return Object(d.jsx)(I,{children:Object(d.jsxs)(s.a,{children:[Object(d.jsx)(j,{}),Object(d.jsxs)(u.c,{children:[Object(d.jsx)(u.a,{exact:!0,path:"/category/:categoryId",component:function(){return Object(d.jsx)(v,{})}}),Object(d.jsx)(u.a,{exact:!0,path:"/item/:itemsId",component:function(){return Object(d.jsx)(w,{})}}),Object(d.jsx)(u.a,{exact:!0,path:"/cart",component:function(){return Object(d.jsx)(z,{})}}),Object(d.jsx)(u.a,{path:"/",component:function(){return Object(d.jsx)(v,{})}})]})]})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,62)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),i(e),c(e),a(e),r(e)}))};r.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(E,{})}),document.getElementById("root")),L()}},[[58,1,2]]]);
//# sourceMappingURL=main.5afa4cf3.chunk.js.map